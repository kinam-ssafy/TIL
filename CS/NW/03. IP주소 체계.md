# IP 주소 체계

## IP 주소

### IP 주소 개념

**IP 주소 (Internet Protocol Address)**
- 네트워크 상에서 각 장치를 구별하기 위한 **논리적 주소**
- vs. MAC 주소: 물리적 주소 (데이터링크 계층)

**구조**
```
[ 네트워크 부분 | 호스트 부분 ]

네트워크 부분: 어떤 네트워크인지 식별
호스트 부분: 네트워크 내 어떤 장치인지 식별
```

<br>

---

## IPv4 vs. IPv6

### IPv4 (Internet Protocol version 4)

**기본 구조**
- 32비트 주소 체계 → 약 43억 개(2³²) 주소
- **점으로 구분된 10진수 표기법 (Dotted Decimal Notation)**
- 예: `192.168.0.10`

**문제점**
- 주소 고갈 문제 → 사설 IP, NAT 등의 기법 등장

<br>

### IPv6 (Internet Protocol version 6)

**기본 구조**
- 128비트 주소 체계 → 사실상 무한대 수준의 주소 (2¹²⁸)
- **16진수 콜론 표기법 (Colon Hexadecimal Notation)**
- 예: `2001:0db8:85a3:0000:0000:8a2e:0370:7334`
- 축약: `2001:db8:85a3::8a2e:370:7334` (연속된 0은 ::로 한 번만 축약)

**특징**
- IPv4 주소 부족 대비 개발
- 동적 할당(DHCP)과 NAT 덕분에 IPv4 여전히 널리 사용 중

<br>

### IPv4 vs. IPv6 비교

| 구분 | IPv4 | IPv6 |
| --- | --- | --- |
| 발표 연도 | 1981 | 1999 |
| 주소 길이 | 32bit | 128bit |
| 표기 형식 | 10진수, 점 구분 | 16진수, 콜론 구분 |
| 예시 | 192.168.0.1 | 3FFE:F200:0234::1 |
| 주소 개수 | 약 43억 개 | 사실상 무한대 (2¹²⁸) |
| TTL 필드명 | Time to Live | Hop Limit |
| 헤더 구조 | 복잡, 다양한 옵션 | 단순화되어 라우팅 효율↑ |
| 브로드캐스트 | 지원 | 미지원 (멀티캐스트 사용) |

<br>

---

## 클래스 기반 주소 (Classful Addressing)

### Class A
```
범위: 0.0.0.0 ~ 127.255.255.255
형식: N.H.H.H (네트워크.호스트.호스트.호스트)

0xxxxxxx.xxxxxxxx.xxxxxxxx.xxxxxxxx
└─8비트─┴────────24비트───────────┘
네트워크        호스트

네트워크 수: 126개 (0과 127 제외)
호스트 수: 약 1677만 개
용도: 대규모 조직
```

### Class B
```
범위: 128.0.0.0 ~ 191.255.255.255
형식: N.N.H.H

10xxxxxx.xxxxxxxx.xxxxxxxx.xxxxxxxx
└───16비트────┴────16비트────┘
  네트워크         호스트

네트워크 수: 약 16,000개
호스트 수: 65,534개
용도: 중규모 조직
```

### Class C
```
범위: 192.0.0.0 ~ 223.255.255.255
형식: N.N.N.H

110xxxxx.xxxxxxxx.xxxxxxxx.xxxxxxxx
└────────24비트──────┴─8비트─┘
      네트워크          호스트

네트워크 수: 약 200만 개
호스트 수: 254개
용도: 소규모 조직
```

### Class D/E
| Class | 범위 | 용도 |
| --- | --- | --- |
| D | 224.0.0.0 ~ 239.255.255.255 | 멀티캐스트 |
| E | 240.0.0.0 ~ 255.255.255.255 | 예약 (실험용) |

<br>

---

## 서브넷 마스크 & CIDR

### 서브넷 마스크 (Subnet Mask)

**개념**
- 네트워크 부분과 호스트 부분을 구분하는 값

**동작**
```
IP 주소:       192.168.1.100
서브넷 마스크:  255.255.255.0

이진수:
IP:   11000000.10101000.00000001.01100100
Mask: 11111111.11111111.11111111.00000000
      └────────네트워크─────┴─호스트─┘

AND 연산 → 네트워크 주소: 192.168.1.0
```

**표기법**
- 점 표기법: `255.255.255.0`
- CIDR 표기법: `/24` (1이 24개)

<br>

### CIDR (Classless Inter-Domain Routing)

**개념**
- 클래스 구분 없이 서브넷 마스크로 유연하게 네트워크 크기 결정

**주요 CIDR 표기**
| CIDR | 서브넷 마스크 | 총 주소 | 사용 가능 호스트 |
| --- | --- | --- | --- |
| /24 | 255.255.255.0 | 256개 | 254개 |
| /25 | 255.255.255.128 | 128개 | 126개 |
| /26 | 255.255.255.192 | 64개 | 62개 |
| /27 | 255.255.255.224 | 32개 | 30개 |
| /28 | 255.255.255.240 | 16개 | 14개 |
| /30 | 255.255.255.252 | 4개 | 2개 (P2P용) |

**서브넷팅 예시**
```
192.168.1.0/24를 4개로 나누기:

/24 → /26으로 변경

192.168.1.0/26    (0~63)
192.168.1.64/26   (64~127)
192.168.1.128/26  (128~191)
192.168.1.192/26  (192~255)

각 서브넷: 64개 주소 (62개 사용 가능)
```

**계산 공식**
```
호스트 비트 수 = 32 - 서브넷 마스크 비트 수
사용 가능 호스트 수 = 2^호스트비트 - 2

-2 이유:
- 네트워크 주소 (호스트 비트 모두 0)
- 브로드캐스트 주소 (호스트 비트 모두 1)
```

<br>

---

## 특수 IP 주소

### 사설 IP (Private IP)

**특징**
- 인터넷에서 직접 사용 불가
- 내부 네트워크 전용
- NAT를 통해 공인 IP로 변환하여 인터넷 접속

| Class | 범위 | CIDR |
| --- | --- | --- |
| A | 10.0.0.0 ~ 10.255.255.255 | /8 |
| B | 172.16.0.0 ~ 172.31.255.255 | /12 |
| C | 192.168.0.0 ~ 192.168.255.255 | /16 |

<br>

### 공인 IP (Public IP)
- 인터넷에서 직접 사용 가능한 유일한 주소
- ISP에서 할당

<br>

### 특수 목적 주소

| 주소 | 의미 | 용도 |
| --- | --- | --- |
| 0.0.0.0 | 모든 IP, 네트워크 자체 | 기본 라우트 |
| 127.0.0.1 | 루프백 (자기 자신) | 로컬 테스트 |
| 255.255.255.255 | 브로드캐스트 | 네트워크 전체 전송 |
| 네트워크 주소 | 호스트 부분 모두 0 | 네트워크 식별 (예: 192.168.1.0/24) |
| 브로드캐스트 주소 | 호스트 부분 모두 1 | 네트워크 전체 전송 (예: 192.168.1.255/24) |

<br>

---

## IP 주소 할당 방식

| 방식 | 설명 | 사용 대상 |
| --- | --- | --- |
| **정적 할당 (Static)** | 수동으로 IP 설정 | 서버, 네트워크 장비 |
| **동적 할당 (Dynamic)** | DHCP를 통해 자동 할당 | 클라이언트 (PC, 스마트폰) |

<br>

---

## 핵심 정리

### IP 주소 구성
```
IP 주소 = 네트워크 ID + 호스트 ID
서브넷 마스크로 구분
```

### 클래스별 특징
- **Class A**: /8, 대규모 네트워크
- **Class B**: /16, 중규모 네트워크
- **Class C**: /24, 소규모 네트워크

### CIDR의 장점
- 유연한 서브넷 크기 조정
- IP 주소 효율적 사용
- /n 표기법으로 간단히 표현

### 사설 IP vs 공인 IP
- **사설 IP**: 내부 네트워크 전용, NAT 필요
- **공인 IP**: 인터넷 직접 사용 가능

### IPv4 vs IPv6
- **IPv4**: 32비트, 고갈 문제
- **IPv6**: 128비트, 차세대 표준, 단순한 헤더