# OSI 7계층 & TCP/IP

## 들어가기 전에 알아야 할 내용

### 네트워크란?
컴퓨터들이 서로 데이터를 주고받기 위해 연결된 시스템

### 프로토콜이란?
컴퓨터 간 통신을 위한 약속과 규칙

- 데이터를 어떤 형식으로 보낼지
- 어떤 순서로 보낼지
- 오류가 나면 어떻게 처리할지

---

## 1. OSI 7계층이란?

### 개념
네트워크 통신을 7개 계층으로 나눈 표준 모델

### 왜 계층으로 나눴나?

**복잡성 관리**
- 각 계층은 독립적인 기능 수행
- 한 계층 수정해도 다른 계층 영향 없음

**표준화**
- 서로 다른 시스템 간 통신 가능
- 각 계층별 명확한 역할 정의

---

## 2. OSI 7계층 구조

```
┌────────────────────────┐
│ 7. 응용 계층            │ 사용자와 가장 가까움
├────────────────────────┤
│ 6. 표현 계층            │
├────────────────────────┤
│ 5. 세션 계층            │
├────────────────────────┤
│ 4. 전송 계층            │
├────────────────────────┤
│ 3. 네트워크 계층        │
├────────────────────────┤
│ 2. 데이터링크 계층      │
├────────────────────────┤
│ 1. 물리 계층            │ 하드웨어와 가장 가까움
└────────────────────────┘
```

### 상위 계층 (5~7): 소프트웨어
사용자 애플리케이션에 가까운 계층

### 하위 계층 (1~4): 하드웨어/소프트웨어
실제 데이터 전송을 담당하는 계층

---

## 3. 각 계층의 역할

### (1) 물리 계층 (Physical Layer)

#### 역할
비트를 전기 신호나 빛으로 변환하여 물리적 매체로 전송

#### 담당 작업
- 0과 1을 전기 신호로 변환
- 케이블 타입 정의
- 전압 레벨 정의
- 데이터 전송 속도

#### 장비
- 케이블 (UTP, 광케이블)
- 허브
- 리피터

---

### (2) 데이터링크 계층 (Data Link Layer)

#### 역할
같은 네트워크 내에서 직접 연결된 두 노드 간 데이터 전송

#### 담당 작업
- **프레임 생성**: 데이터를 프레임 단위로 묶음
- **MAC 주소 사용**: 물리적 주소로 목적지 찾기
- **오류 검출**: CRC 등으로 전송 오류 확인
- **흐름 제어**: 송신 속도 조절

#### 프로토콜
- Ethernet
- PPP
- Wi-Fi

#### 장비
- 스위치
- 브리지
- NIC (네트워크 인터페이스 카드)

---

### (3) 네트워크 계층 (Network Layer)

#### 역할
서로 다른 네트워크 간 경로를 찾아 데이터 전송

#### 담당 작업
- **라우팅**: 최적 경로 결정
- **IP 주소 사용**: 논리적 주소
- **패킷 생성**: 데이터를 패킷 단위로 분할
- **혼잡 제어**: 네트워크 혼잡도 관리

#### 프로토콜
- IP (Internet Protocol)
- ICMP (ping 명령)
- ARP

#### 장비
- 라우터
- L3 스위치

---

### (4) 전송 계층 (Transport Layer)

#### 역할
종단 간(End-to-End) 신뢰성 있는 데이터 전송

#### 담당 작업
- **포트 번호 사용**: 어떤 애플리케이션인지 구분
- **세그먼트 생성**: 데이터를 세그먼트로 분할
- **오류 제어**: 손실된 데이터 재전송
- **흐름 제어**: 수신자 속도에 맞춤
- **연결 관리**: 연결 수립/해제

#### 프로토콜
- TCP (신뢰성 보장)
- UDP (빠른 전송)

---

### (5) 세션 계층 (Session Layer)

#### 역할
응용 프로그램 간 연결(세션) 관리

#### 담당 작업
- 세션 수립, 유지, 종료
- 동기화 (체크포인트)
- 대화 제어 (전이중/반이중)

#### 예시
- 로그인 세션 유지
- 화상 회의 연결 관리

---

### (6) 표현 계층 (Presentation Layer)

#### 역할
데이터 형식 변환 및 암호화

#### 담당 작업
- **인코딩/디코딩**: 문자 코드 변환 (ASCII, UTF-8)
- **압축/압축 해제**: 데이터 크기 축소
- **암호화/복호화**: 보안 처리

#### 예시
- JPEG, MPEG (압축)
- SSL/TLS (암호화)

---

### (7) 응용 계층 (Application Layer)

#### 역할
사용자에게 네트워크 서비스 제공

#### 담당 작업
- 사용자 인터페이스 제공
- 네트워크 애플리케이션 지원

#### 프로토콜
- HTTP/HTTPS (웹)
- FTP (파일 전송)
- SMTP (이메일 전송)
- DNS (도메인 이름 변환)
- SSH (원격 접속)

---

## 4. 데이터 전송 과정

### 송신 측 (캡슐화)

```
응용 계층: [데이터]
         ↓
표현 계층: [데이터]
         ↓
세션 계층: [데이터]
         ↓
전송 계층: [TCP헤더|데이터]               → 세그먼트
         ↓
네트워크 계층: [IP헤더|TCP헤더|데이터]    → 패킷
         ↓
데이터링크 계층: [Eth헤더|IP|TCP|데이터|Eth트레일러] → 프레임
         ↓
물리 계층: 01010101... (비트)
```

### 각 계층에서 헤더 추가
- 전송 계층: TCP/UDP 헤더 (포트 번호, 순서 번호)
- 네트워크 계층: IP 헤더 (출발지/목적지 IP)
- 데이터링크 계층: Ethernet 헤더 (MAC 주소)

### 수신 측 (역캡슐화)

```
물리 계층: 01010101...
         ↓
데이터링크 계층: [헤더 제거] → 패킷 추출
         ↓
네트워크 계층: [IP 헤더 제거] → 세그먼트 추출
         ↓
전송 계층: [TCP 헤더 제거] → 데이터 추출
         ↓
세션 계층
         ↓
표현 계층
         ↓
응용 계층: [데이터] → 사용자에게 전달
```

---

## 5. TCP/IP 모델

### 개념
실제로 인터넷에서 사용되는 프로토콜 집합

### OSI vs TCP/IP

```
OSI 7계층              TCP/IP 4계층

7. 응용 계층 ┐
6. 표현 계층 ├──────→  4. 응용 계층
5. 세션 계층 ┘

4. 전송 계층 ──────→  3. 전송 계층

3. 네트워크 계층 ───→  2. 인터넷 계층

2. 데이터링크 계층 ┐
                  ├→  1. 네트워크 접근 계층
1. 물리 계층     ┘
```

---

## 6. TCP/IP 각 계층

### (1) 네트워크 접근 계층 (Network Access)

#### 역할
물리적 네트워크를 통한 데이터 전송

#### 담당
- 물리적 주소 지정 (MAC)
- 프레임 생성
- 하드웨어 접근

#### 프로토콜
- Ethernet
- Wi-Fi
- PPP

---

### (2) 인터넷 계층 (Internet)

#### 역할
패킷의 경로 지정 및 전달

#### 담당
- IP 주소 지정
- 라우팅
- 패킷 분할/재조립

#### 프로토콜
- IP
- ICMP
- ARP

---

### (3) 전송 계층 (Transport)

#### 역할
종단 간 신뢰성 있는 데이터 전송

#### 프로토콜

**TCP (Transmission Control Protocol)**
- 연결 지향
- 신뢰성 보장 (오류 검출, 재전송)
- 순서 보장
- 흐름 제어, 혼잡 제어
- 사용: HTTP, FTP, 이메일

**UDP (User Datagram Protocol)**
- 비연결형
- 신뢰성 보장 없음
- 빠른 전송
- 사용: 스트리밍, DNS, 게임

---

### (4) 응용 계층 (Application)

#### 역할
사용자 애플리케이션에 네트워크 서비스 제공

#### 주요 프로토콜

**HTTP (Hypertext Transfer Protocol)**
- 웹 페이지 전송
- 포트 80

**HTTPS (HTTP Secure)**
- 암호화된 HTTP
- 포트 443

**FTP (File Transfer Protocol)**
- 파일 전송
- 포트 20, 21

**SMTP (Simple Mail Transfer Protocol)**
- 이메일 전송
- 포트 25, 587

**DNS (Domain Name System)**
- 도메인 이름을 IP 주소로 변환
- 포트 53

---

## 7. 실제 통신 예시: 웹 브라우징

### 사용자가 www.example.com 접속

```
1. 응용 계층
   - 브라우저가 HTTP GET 요청 생성

2. 전송 계층
   - TCP 연결 수립 (3-way handshake)
   - 포트 80(HTTP) 또는 443(HTTPS) 사용
   - TCP 헤더 추가 (출발지/목적지 포트)

3. 인터넷 계층
   - DNS로 example.com의 IP 주소 획득
   - IP 헤더 추가 (출발지/목적지 IP)
   - 라우팅 경로 결정

4. 네트워크 접근 계층
   - Ethernet 프레임 생성
   - MAC 주소 추가
   - 물리적 신호로 변환하여 전송

5. 수신 측에서 역순으로 처리
   - 각 계층에서 헤더 제거
   - 최종적으로 웹 페이지 데이터만 추출
```

---

## 8. OSI와 TCP/IP 비교

### OSI 모델
- 이론적 표준 모델
- 7계층으로 세분화
- 각 계층의 역할 명확
- 교육 목적

### TCP/IP 모델
- 실제 인터넷에서 사용
- 4계층으로 단순화
- 실용적
- 현실 반영

---

## 9. 핵심 정리

### 계층 구조의 장점

**독립성**
- 각 계층은 독립적으로 동작
- 한 계층 변경이 다른 계층에 영향 없음

**표준화**
- 계층별 명확한 인터페이스
- 다른 제조사 장비 간 호환

**모듈화**
- 복잡한 네트워크를 단순한 단위로 분할
- 개발과 유지보수 용이

**문제 해결**
- 계층별로 문제 격리 가능
- 디버깅 쉬움

### 프로토콜 계층 흐름

```
응용: 사용자 데이터
  ↓
전송: 포트 번호 추가 (어떤 프로그램)
  ↓
인터넷: IP 주소 추가 (어떤 컴퓨터)
  ↓
네트워크 접근: MAC 주소 추가 (어떤 장치)
  ↓
물리: 전기 신호로 변환
```